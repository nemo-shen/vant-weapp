<wxs src="../wxs/utils.wxs" module="utils" />
<wxs src="../wxs/style.wxs" module="style" />
<wxs src="./index.wxs" module="computed" />

<view
  class="van-rate custom-class"
  bind:touchstart="onTouchStart"
  bind:touchmove="onTouchMove"
>
  <view
    wx:key="index"
    class="{{ utils.bem('rate__item') }}"
    wx:for="{{ computed.getList({ count, modelValue: innerValue, allowHalf, readonly, gutter }) }}"
    style="{{ style(item.style) }}"
    data-score="{{ item.score }}"
    bind:tap="onClickItem"
  >
    <van-icon
      style="{{ style({ fontSize: utils.addUnit(size) })}}"
      name="{{ item.isFull ? icon : voidIcon }}"
      class="{{ utils.bem('rate__icon', { disabled, full: item.isFull }) }}"
      custom-class="icon-class"
      color="{{ disabled ? disabledColor : item.isFull ? color : voidColor }}"
    />
    <van-icon
      wx:if="{{ item.renderHalf }}"
      style="{{ style({ fontSize: utils.addUnit(size), width: item.value + 'em' })}}"
      name="{{ item.isVoid ? voidIcon : icon }}"
      class="{{ utils.bem('rate__icon', ['half', { disabled, full: !item.isVoid }])}}"
      color="{{ disabled ? disabledColor : isVoid ? voidColor : color }}"
      custom-class="icon-class"
    />
  </view>
</view>
